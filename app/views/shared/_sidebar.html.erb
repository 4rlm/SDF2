<nav id="sidebar" class="container">

  <% if @q.present? %>
    <%= search_form_for(@q, url: search_webs_path, html: {method: :post, class: 'form'}) do |f| %>
      <% temps = @webs.select(:temp_name).where.not(temp_name: nil).pluck(:temp_name).uniq.sort %>
      <% brands = get_brands_for_select(@webs) %>
      <% cops = [true, false] %>
      <% url_stss = @webs.select(:url_sts).where.not(url_sts: nil).pluck(:url_sts).uniq.sort %>
      <% temp_stss = @webs.select(:temp_sts).where.not(temp_sts: nil).pluck(:temp_sts).uniq.sort %>
      <% page_stss = @webs.select(:page_sts).where.not(page_sts: nil).pluck(:page_sts).uniq.sort %>
      <% cs_stss = @webs.select(:cs_sts).where.not(cs_sts: nil).pluck(:cs_sts).uniq.sort %>


      <!-- SEARCH SECTION - START -->
      <h5 class="text-center sidebar-header">Search Criteria</h5>
      <ul class="components">

        <!-- SEARCH WEBS - START -->
        <li>
          <a class="dropdown-toggle" href="#web-criteria" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'external-link-alt', 'Web Criteria') %>
          </a>

          <ul class="collapse" id="web-criteria">

            <!-- Search Webs (URL) -->
            <li class="field">
              <%= f.label :url_cont_any, "Website: " %>
              <%= f.search_field :url_cont_any %>
            </li>

            <!-- Search Webs (Cop Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-cop" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'star', 'CoPilot') %>
              </a>

              <ul class="collapse" id="web-criteria-cop">
                <% cops.each do |cop| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[cop_in][]', cop) %>
                        <%= cop %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (url_sts Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-url-sts" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'star', 'url_sts') %>
              </a>

              <ul class="collapse" id="web-criteria-url-sts">
                <% url_stss.each do |url_sts| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[url_sts_in][]', url_sts) %>
                        <%= url_sts %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (temp_sts Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-temp-sts" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'star', 'temp_sts') %>
              </a>

              <ul class="collapse" id="web-criteria-temp-sts">
                <% temp_stss.each do |temp_sts| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[temp_sts_in][]', temp_sts) %>
                        <%= temp_sts %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (page_sts Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-page-sts" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'star', 'page_sts') %>
              </a>

              <ul class="collapse" id="web-criteria-page-sts">
                <% page_stss.each do |page_sts| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[page_sts_in][]', page_sts) %>
                        <%= page_sts %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (cs_sts Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-cs-sts" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'star', 'cs_sts') %>
              </a>

              <ul class="collapse" id="web-criteria-cs-sts">
                <% cs_stss.each do |cs_sts| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[cs_sts_in][]', cs_sts) %>
                        <%= cs_sts %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (Template Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-temp-name" data-toggle="collapse" aria-expanded="false">
                <%= icon('fab', 'firstdraft', 'Template') %>
              </a>

              <ul class="collapse" id="web-criteria-temp-name">
                <% temps.each do |temp_name| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[temp_name_in][]', temp_name) %>
                        <%= temp_name %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

            <!-- Search Webs (Franchise Brand Check Boxes) -->
            <li>
              <a class="dropdown-toggle" href="#web-criteria-brand-name" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'car', 'Franchise Brand') %>
              </a>

              <ul class="collapse" id="web-criteria-brand-name">
                <% brands.each do |brand_name| %>
                  <div class="form-group row">
                    <div class="form-check">
                      <label class="form-check-label">
                        <%= check_box_tag('q[brands_brand_name_in][]', brand_name) %>
                        <%= brand_name %>
                      </label>
                    </div>
                  </div>
                <% end %>
              </ul>
            </li>

          </ul>
        </li>


        <!-- SEARCH ACCOUNTS - START -->
        <li>
          <a class="dropdown-toggle" href="#act-criteria" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'building', 'Account Criteria') %>
          </a>

          <ul class="collapse" id="act-criteria">

            <!-- Search Accounts (State) -->
            <div class="field">
              <%= f.label :acts_state_cont_any, "State: " %>
              <%= f.search_field :acts_state_cont_any %>
            </div>

          </ul>
        </li>

        <!-- SEARCH CONTACTS - START -->
        <li>
          <a class="dropdown-toggle" href="#cont-criteria" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'users', 'Contact Criteria') %>
          </a>

          <ul class="collapse list-unstyled" id="cont-criteria">

            <% temps.each do |temp_name| %>
              <div class="form-group row">
                <div class="form-check">
                  <label class="form-check-label">
                    <%= check_box_tag('q[temp_name_in][]', temp_name) %>
                    <%= temp_name %>
                  </label>
                </div>
              </div>
            <% end %>

          </ul>
        </li>
      </ul>




      <!-- SORT SECTION - START -->
      <h5 class="text-center sidebar-header">
        <%= icon('fas', 'sort', 'Sort Options', class: 'fa-pull-right') %>
      </h5>

      <ul class="components">

        <!-- SORT WEBS - START -->
        <li>
          <a class="dropdown-toggle" href="#sort-options-webs" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'external-link-alt', 'Web Sort') %>
          </a>

          <ul class="collapse" id="sort-options-webs">

            <!-- Sort Webs (General) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-webs-general" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'list-alt', 'General') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-webs-general">
                <%= sort_link(@q, :url) do %>
                  <span><%= icon('fas', 'home', 'URL') %></span>
                <% end %>

                <%= sort_link(@q, :fwd_url) do %>
                  <span><%= icon('fas', 'home', 'Redirected URL') %></span>
                <% end %>

                <%= sort_link(@q, :brands_brand_name) do %>
                  <span><%= icon('fas', 'car', 'Franchise Brand') %></span>
                <% end %>

                <%= sort_link(@q, :temp_name) do %>
                  <span><%= icon('fab', 'firstdraft', 'Template') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Webs (Status) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-webs-status" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'check-square', 'Status') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-webs-status">
                <%= sort_link(@q, :url_sts) do %>
                  <span><%= icon('fas', 'home', 'URL') %></span>
                <% end %>

                <%= sort_link(@q, :cop) do %>
                  <span><%= icon('fas', 'star', 'CoPilot') %></span>
                <% end %>

                <%= sort_link(@q, :temp_sts) do %>
                  <span><%= icon('fab', 'firstdraft', 'Template') %></span>
                <% end %>

                <%= sort_link(@q, :page_sts) do %>
                  <span><%= icon('fas', 'link', 'Staff Page') %></span>
                <% end %>

                <%= sort_link(@q, :cs_sts) do %>
                  <span><%= icon('fas', 'users', 'Staff Mined') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Webs (Dates) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-webs-dates" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'calendar-alt', 'Dates') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-webs-dates">
                <%= sort_link(@q, :url_date) do %>
                  <span><%= icon('fas', 'home', 'URL Verified') %></span>
                <% end %>

                <%= sort_link(@q, :web_changed) do %>
                  <span><%= icon('fas', 'home', 'URL Changed') %></span>
                <% end %>

                <%= sort_link(@q, :wx_date) do %>
                  <span><%= icon('fas', 'home', 'URL Inactive') %></span>
                <% end %>

                <%= sort_link(@q, :tmp_date) do %>
                  <span><%= icon('fab', 'firstdraft', 'Template Verified') %></span>
                <% end %>

                <%= sort_link(@q, :page_date) do %>
                  <span><%= icon('fas', 'link', 'Staff Page Verified') %></span>
                <% end %>

                <%= sort_link(@q, :cs_date) do %>
                  <span><%= icon('fas', 'users', 'Staff Mined') %></span>
                <% end %>

                <%= sort_link(@q, :created_at) do %>
                  <span><%= icon('fas', 'external-link-alt', 'Web Created') %></span>
                <% end %>

                <%= sort_link(@q, :updated_at) do %>
                  <span><%= icon('fas', 'external-link-alt', 'Web Updated') %></span>
                <% end %>
              </ul>
            </li>

          </ul>
        </li>


        <!-- SORT ACTS - START -->
        <li>
          <a class="dropdown-toggle" href="#sort-options-acts" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'building', 'Account Sort') %>
          </a>

          <ul class="collapse" id="sort-options-acts">

            <!-- Sort Acts (General) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-acts-general" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'list-alt', 'General') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-acts-general">
                <%= sort_link(@q, :acts_act_name) do %>
                  <span><%= icon('fas', 'building', 'Account Name') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Acts (Status) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-acts-status" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'check-square', 'Status') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-acts-status">
                <%= sort_link(@q, :acts_gp_sts) do %>
                  <span><%= icon('fab', 'google', 'GP') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Acts (Dates) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-acts-dates" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'calendar-alt', 'Dates') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-acts-dates">
                <%= sort_link(@q, :acts_gp_date) do %>
                  <span><%= icon('fab', 'google', 'GP') %></span>
                <% end %>
              </ul>
            </li>

          </ul>
        </li>


        <!-- SORT CONTS - START -->
        <li>
          <a class="dropdown-toggle" href="#sort-options-conts" data-toggle="collapse" aria-expanded="false">
            <%= icon('fas', 'users', 'Contact Sort') %>
          </a>

          <ul class="collapse" id="sort-options-conts">

            <!-- Sort Conts (General) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-conts-general" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'list-alt', 'General') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-conts-general">
                <%= sort_link(@q, :conts_full_name) do %>
                  <span><%= icon('fas', 'user', 'Full Name') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Conts (Status) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-conts-status" data-toggle="collapse" aria-expanded="false">
                <%= icon('far', 'check-square', 'Status') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-conts-status">
                <%= sort_link(@q, :conts_cs_sts) do %>
                  <span><%= icon('fas', 'user', 'CS') %></span>
                <% end %>
              </ul>
            </li>

            <!-- Sort Conts (Dates) -->
            <li>
              <a class="dropdown-toggle" href="#sort-options-conts-dates" data-toggle="collapse" aria-expanded="false">
                <%= icon('fas', 'calendar-alt', 'Dates') %>
              </a>

              <ul class="collapse list-unstyled" id="sort-options-conts-dates">
                <%= sort_link(@q, :cs_date) do %>
                  <span><%= icon('fas', 'user', 'CS') %></span>
                <% end %>
              </ul>
            </li>

          </ul>
        </li>

      </ul>



      <div class="actions"><%= f.submit "Search" %></div>
      <div class=""><%= link_to("Clear Search", request.path) %></div>
    <% end %>
  <% end %>

</nav>
