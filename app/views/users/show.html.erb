<p id="notice"><%= notice %></p>

<h3>User Profile</h3>

<!-- ## ENSURES ACTIVITIES CREATED FOR USER -->
<% create_all_activities(current_user.id) %>


<div class="row">
  <h6>User Profile</h6>
  <table class="table">
    <thead class="thead-inverse">
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Role</th>
        <th>Registered</th>
        <th>Updated</th>
      </tr>
    </thead>

    <tr>
      <td><%= @user.first_name.capitalize %> <%= @user.last_name.capitalize %></td>
      <td><%= @user.email %></td>
      <td><%= @user.phone %></td>
      <td><%= @user.role.capitalize %></td>
      <td><%= @user.created_at.strftime('%x') %></td>
      <td><%= @user.updated_at.strftime('%x') %></td>
    </tr>
  </table>
</div>

<br>

<div class="panel">
  <h6>Following & Hidden</h6>
  <div class="row">

    <div class="col-md-4">
      <% get_followed_act_ids_count = get_followed_act_ids(nil)&.count %>
      <% get_hidden_act_ids_count = get_hidden_act_ids(nil)&.count %>
      <% get_followed_cont_ids_count = get_followed_cont_ids(nil)&.count %>
      <% get_hidden_cont_ids_count = get_hidden_cont_ids(nil)&.count %>
      <% get_followed_web_ids_count = get_followed_web_ids(nil)&.count %>
      <% get_hidden_web_ids_count = get_hidden_web_ids(nil)&.count %>
      <% params[:source_path] = 'user_path' %>

      <!-- Followed & Hidden Acts -->
      <table class="table">
        <thead>
          <tr>
            <th colspan="2" class="text-center">Followed & Hidden Acts</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= link_to "View Followed: #{get_followed_act_ids_count}", webs_path(params), class: 'btn btn-primary btn-md' %></td>
            <td><%= link_to "UnFollow All: #{get_followed_act_ids_count}", unfollow_all_act_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>

          <tr>
            <td><%= link_to "View Hidden: #{get_hidden_act_ids_count}", webs_path(params), class: 'btn btn-danger btn-md' %></td>
            <td><%= link_to "UnHide All: #{get_hidden_act_ids_count}", unhide_all_act_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>
        </tbody>
      </table>


      <!-- Followed & Hidden Conts -->
      <table class="table">
        <thead>
          <tr>
            <th colspan="2" class="text-center">Followed & Hidden Conts</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= link_to "View Followed: #{get_followed_cont_ids_count}", conts_path(params), class: 'btn btn-primary btn-md' %></td>
            <td><%= link_to "UnFollow All: #{get_followed_cont_ids_count}", unfollow_all_cont_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>

          <tr>
            <td><%= link_to "View Hidden: #{get_hidden_cont_ids_count}", conts_path(params), class: 'btn btn-danger btn-md' %></td>
            <td><%= link_to "UnHide All: #{get_hidden_cont_ids_count}", unhide_all_cont_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>
        </tbody>
      </table>


      <!-- Followed & Hidden Webs -->
      <table class="table">
        <thead>
          <tr>
            <th colspan="2" class="text-center">Followed & Hidden Webs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= link_to "View Followed: #{get_followed_web_ids_count}", webs_path(params), class: 'btn btn-primary btn-md' %></td>
            <td><%= link_to "UnFollow All: #{get_followed_web_ids_count}", unfollow_all_web_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>

          <tr>
            <td><%= link_to "View Hidden: #{get_hidden_web_ids_count}", webs_path(params), class: 'btn btn-danger btn-md' %></td>
            <td><%= link_to "UnHide All: #{get_hidden_web_ids_count}", unhide_all_web_activities_path(params), class: 'btn btn-default btn-md' %></td>
          </tr>
        </tbody>
      </table>

    </div>


    <div class="col-md-4">
    </div>



    <div class="col-md-4">
    </div>




  </div>
</div>

<br>

<div class="panel">
  <div class="row">

  <div class="col-md-4">
    <h6 class="text-center">Exports</h6>
    <table class="table">
      <thead>
        <tr>
          <th>file_name</th>
          <th>export_date</th>
        </tr>
      </thead>
      <tbody>
        <% exports = @user.exports %>
        <% exports.each do |export| %>
        <tr>
          <td><%= export.file_name %></td>
          <td><%= export.export_date.strftime('%x') %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>


  <div class="col-md-4">
    <h6 class="text-center">Saved Account Searches</h6>
    <table class="table">
      <thead>
        <tr>
          <th>Search Name</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        <% web_queries = @user.queries.where(mod_name: 'Web').order("updated_at DESC") %>
        <% web_queries&.each do |web_query| %>
          <tr>
            <td><%= link_to web_query.q_name, search_webs_path({q: web_query.params['q']}) %></td>
            <td><%= web_query.created_at.strftime('%x') %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>


  <div class="col-md-4">
    <h6 class="text-center">Saved Contact Searches</h6>
    <table class="table">
      <thead>
        <tr>
          <th>Search Name</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        <% cont_queries = @user.queries.where(mod_name: 'Cont').order("updated_at DESC") %>
        <% cont_queries&.each do |cont_query| %>
          <tr>
            <td><%= link_to cont_query.q_name, search_conts_path({q: cont_query.params['q']}) %></td>
            <td><%= cont_query.created_at.strftime('%x') %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  </div>
</div>




<br>
<br>
